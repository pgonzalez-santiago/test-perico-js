!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e||self).voiceUi=n()}(this,function(){var e,n,t,r,o,i={},u=[],l=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function _(e,n){for(var t in n)e[t]=n[t];return e}function c(e){var n=e.parentNode;n&&n.removeChild(e)}function a(e,n,t){var r,o,i,u=arguments,l={};for(i in n)"key"==i?r=n[i]:"ref"==i?o=n[i]:l[i]=n[i];if(arguments.length>3)for(t=[t],i=3;i<arguments.length;i++)t.push(u[i]);if(null!=t&&(l.children=t),"function"==typeof e&&null!=e.defaultProps)for(i in e.defaultProps)void 0===l[i]&&(l[i]=e.defaultProps[i]);return s(e,l,r,o,null)}function s(n,t,r,o,i){var u={type:n,props:t,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==i?++e.__v:i};return null!=e.vnode&&e.vnode(u),u}function f(e){return e.children}function d(e,n){this.props=e,this.context=n}function p(e,n){if(null==n)return e.__?p(e.__,e.__.__k.indexOf(e)+1):null;for(var t;n<e.__k.length;n++)if(null!=(t=e.__k[n])&&null!=t.__e)return t.__e;return"function"==typeof e.type?p(e):null}function h(e){var n,t;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if(null!=(t=e.__k[n])&&null!=t.__e){e.__e=e.__c.base=t.__e;break}return h(e)}}function v(o){(!o.__d&&(o.__d=!0)&&n.push(o)&&!m.__r++||r!==e.debounceRendering)&&((r=e.debounceRendering)||t)(m)}function m(){for(var e;m.__r=n.length;)e=n.sort(function(e,n){return e.__v.__b-n.__v.__b}),n=[],e.some(function(e){var n,t,r,o,i,u,l;e.__d&&(u=(i=(n=e).__v).__e,(l=n.__P)&&(t=[],(r=_({},i)).__v=i.__v+1,o=P(l,i,r,n.__n,void 0!==l.ownerSVGElement,null!=i.__h?[u]:null,t,null==u?p(i):u,i.__h),A(t,i),o!=u&&h(i)))})}function y(e,n,t,r,o,l,_,a,d,h){var v,m,y,g,k,w,E,S=r&&r.__k||u,N=S.length;for(d==i&&(d=null!=_?_[0]:N?p(r,0):null),t.__k=[],v=0;v<n.length;v++)if(null!=(g=t.__k[v]=null==(g=n[v])||"boolean"==typeof g?null:"string"==typeof g||"number"==typeof g?s(null,g,null,null,g):Array.isArray(g)?s(f,{children:g},null,null,null):null!=g.__e||null!=g.__c?s(g.type,g.props,g.key,null,g.__v):g)){if(g.__=t,g.__b=t.__b+1,null===(y=S[v])||y&&g.key==y.key&&g.type===y.type)S[v]=void 0;else for(m=0;m<N;m++){if((y=S[m])&&g.key==y.key&&g.type===y.type){S[m]=void 0;break}y=null}k=P(e,g,y=y||i,o,l,_,a,d,h),(m=g.ref)&&y.ref!=m&&(E||(E=[]),y.ref&&E.push(y.ref,null,g),E.push(m,g.__c||k,g)),null!=k?(null==w&&(w=k),d=b(e,g,y,S,_,k,d),h||"option"!=t.type?"function"==typeof t.type&&(t.__d=d):e.value=""):d&&y.__e==d&&d.parentNode!=e&&(d=p(y))}if(t.__e=w,null!=_&&"function"!=typeof t.type)for(v=_.length;v--;)null!=_[v]&&c(_[v]);for(v=N;v--;)null!=S[v]&&I(S[v],S[v]);if(E)for(v=0;v<E.length;v++)T(E[v],E[++v],E[++v])}function g(e,n){return n=n||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some(function(e){g(e,n)}):n.push(e)),n}function b(e,n,t,r,o,i,u){var l,_,c;if(void 0!==n.__d)l=n.__d,n.__d=void 0;else if(o==t||i!=u||null==i.parentNode)e:if(null==u||u.parentNode!==e)e.appendChild(i),l=null;else{for(_=u,c=0;(_=_.nextSibling)&&c<r.length;c+=2)if(_==i)break e;e.insertBefore(i,u),l=u}return void 0!==l?l:i.nextSibling}function k(e,n,t){"-"===n[0]?e.setProperty(n,t):e[n]=null==t?"":"number"!=typeof t||l.test(n)?t:t+"px"}function w(e,n,t,r,o){var i,u,l;if(o&&"className"==n&&(n="class"),"style"===n)if("string"==typeof t)e.style.cssText=t;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(n in r)t&&n in t||k(e.style,n,"");if(t)for(n in t)r&&t[n]===r[n]||k(e.style,n,t[n])}else"o"===n[0]&&"n"===n[1]?(i=n!==(n=n.replace(/Capture$/,"")),(u=n.toLowerCase())in e&&(n=u),n=n.slice(2),e.l||(e.l={}),e.l[n+i]=t,l=i?S:E,t?r||e.addEventListener(n,l,i):e.removeEventListener(n,l,i)):"list"!==n&&"tagName"!==n&&"form"!==n&&"type"!==n&&"size"!==n&&"download"!==n&&"href"!==n&&!o&&n in e?e[n]=null==t?"":t:"function"!=typeof t&&"dangerouslySetInnerHTML"!==n&&(n!==(n=n.replace(/xlink:?/,""))?null==t||!1===t?e.removeAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase(),t):null==t||!1===t&&!/^ar/.test(n)?e.removeAttribute(n):e.setAttribute(n,t))}function E(n){this.l[n.type+!1](e.event?e.event(n):n)}function S(n){this.l[n.type+!0](e.event?e.event(n):n)}function N(e,n,t){var r,o;for(r=0;r<e.__k.length;r++)(o=e.__k[r])&&(o.__=e,o.__e&&("function"==typeof o.type&&o.__k.length>1&&N(o,n,t),n=b(t,o,o,e.__k,null,o.__e,n),"function"==typeof e.type&&(e.__d=n)))}function P(n,t,r,o,l,c,a,s,p){var h,v,m,g,b,k,E,S,P,A,T,I=t.type;if(void 0!==t.constructor)return null;null!=r.__h&&(p=r.__h,s=t.__e=r.__e,t.__h=null,c=[s]),(h=e.__b)&&h(t);try{e:if("function"==typeof I){if(S=t.props,P=(h=I.contextType)&&o[h.__c],A=h?P?P.props.value:h.__:o,r.__c?E=(v=t.__c=r.__c).__=v.__E:("prototype"in I&&I.prototype.render?t.__c=v=new I(S,A):(t.__c=v=new d(S,A),v.constructor=I,v.render=C),P&&P.sub(v),v.props=S,v.state||(v.state={}),v.context=A,v.__n=o,m=v.__d=!0,v.__h=[]),null==v.__s&&(v.__s=v.state),null!=I.getDerivedStateFromProps&&(v.__s==v.state&&(v.__s=_({},v.__s)),_(v.__s,I.getDerivedStateFromProps(S,v.__s))),g=v.props,b=v.state,m)null==I.getDerivedStateFromProps&&null!=v.componentWillMount&&v.componentWillMount(),null!=v.componentDidMount&&v.__h.push(v.componentDidMount);else{if(null==I.getDerivedStateFromProps&&S!==g&&null!=v.componentWillReceiveProps&&v.componentWillReceiveProps(S,A),!v.__e&&null!=v.shouldComponentUpdate&&!1===v.shouldComponentUpdate(S,v.__s,A)||t.__v===r.__v){v.props=S,v.state=v.__s,t.__v!==r.__v&&(v.__d=!1),v.__v=t,t.__e=r.__e,t.__k=r.__k,v.__h.length&&a.push(v),N(t,s,n);break e}null!=v.componentWillUpdate&&v.componentWillUpdate(S,v.__s,A),null!=v.componentDidUpdate&&v.__h.push(function(){v.componentDidUpdate(g,b,k)})}v.context=A,v.props=S,v.state=v.__s,(h=e.__r)&&h(t),v.__d=!1,v.__v=t,v.__P=n,h=v.render(v.props,v.state,v.context),v.state=v.__s,null!=v.getChildContext&&(o=_(_({},o),v.getChildContext())),m||null==v.getSnapshotBeforeUpdate||(k=v.getSnapshotBeforeUpdate(g,b)),T=null!=h&&h.type==f&&null==h.key?h.props.children:h,y(n,Array.isArray(T)?T:[T],t,r,o,l,c,a,s,p),v.base=t.__e,t.__h=null,v.__h.length&&a.push(v),E&&(v.__E=v.__=null),v.__e=!1}else null==c&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=function(e,n,t,r,o,l,_,c){var a,s,f,d,p,h=t.props,v=n.props;if(o="svg"===n.type||o,null!=l)for(a=0;a<l.length;a++)if(null!=(s=l[a])&&((null===n.type?3===s.nodeType:s.localName===n.type)||e==s)){e=s,l[a]=null;break}if(null==e){if(null===n.type)return document.createTextNode(v);e=o?document.createElementNS("http://www.w3.org/2000/svg",n.type):document.createElement(n.type,v.is&&{is:v.is}),l=null,c=!1}if(null===n.type)h===v||c&&e.data===v||(e.data=v);else{if(null!=l&&(l=u.slice.call(e.childNodes)),f=(h=t.props||i).dangerouslySetInnerHTML,d=v.dangerouslySetInnerHTML,!c){if(null!=l)for(h={},p=0;p<e.attributes.length;p++)h[e.attributes[p].name]=e.attributes[p].value;(d||f)&&(d&&(f&&d.__html==f.__html||d.__html===e.innerHTML)||(e.innerHTML=d&&d.__html||""))}(function(e,n,t,r,o){var i;for(i in t)"children"===i||"key"===i||i in n||w(e,i,null,t[i],r);for(i in n)o&&"function"!=typeof n[i]||"children"===i||"key"===i||"value"===i||"checked"===i||t[i]===n[i]||w(e,i,n[i],t[i],r)})(e,v,h,o,c),d?n.__k=[]:(a=n.props.children,y(e,Array.isArray(a)?a:[a],n,t,r,"foreignObject"!==n.type&&o,l,_,i,c)),c||("value"in v&&void 0!==(a=v.value)&&(a!==e.value||"progress"===n.type&&!a)&&w(e,"value",a,h.value,!1),"checked"in v&&void 0!==(a=v.checked)&&a!==e.checked&&w(e,"checked",a,h.checked,!1))}return e}(r.__e,t,r,o,l,c,a,p);(h=e.diffed)&&h(t)}catch(n){t.__v=null,(p||null!=c)&&(t.__e=s,t.__h=!!p,c[c.indexOf(s)]=null),e.__e(n,t,r)}return t.__e}function A(n,t){e.__c&&e.__c(t,n),n.some(function(t){try{n=t.__h,t.__h=[],n.some(function(e){e.call(t)})}catch(n){e.__e(n,t.__v)}})}function T(n,t,r){try{"function"==typeof n?n(t):n.current=t}catch(n){e.__e(n,r)}}function I(n,t,r){var o,i,u;if(e.unmount&&e.unmount(n),(o=n.ref)&&(o.current&&o.current!==n.__e||T(o,null,t)),r||"function"==typeof n.type||(r=null!=(i=n.__e)),n.__e=n.__d=void 0,null!=(o=n.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(n){e.__e(n,t)}o.base=o.__P=null}if(o=n.__k)for(u=0;u<o.length;u++)o[u]&&I(o[u],t,r);null!=i&&c(i)}function C(e,n,t){return this.constructor(e,t)}e={__e:function(e,n){for(var t,r,o,i=n.__h;n=n.__;)if((t=n.__c)&&!t.__)try{if((r=t.constructor)&&null!=r.getDerivedStateFromError&&(t.setState(r.getDerivedStateFromError(e)),o=t.__d),null!=t.componentDidCatch&&(t.componentDidCatch(e),o=t.__d),o)return n.__h=i,t.__E=t}catch(n){e=n}throw e},__v:0},d.prototype.setState=function(e,n){var t;t=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=_({},this.state),"function"==typeof e&&(e=e(_({},t),this.props)),e&&_(t,e),null!=e&&this.__v&&(n&&this.__h.push(n),v(this))},d.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),v(this))},d.prototype.render=f,n=[],t="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,m.__r=0,o=i;var M,U=function(e){var n,t=e.selector,r=e.inline,o=e.clientSpecified,i=[],u=document.currentScript||(n=document.getElementsByTagName("script"))[n.length-1];return!0===r&&i.push(u.parentNode),!0!==o||t||(t=function(e){var n=e.attributes,t=null;return Object.keys(n).forEach(function(e){n.hasOwnProperty(e)&&"data-mount-in"===n[e].name&&(t=n[e].nodeValue)}),t}(u)),t&&[].forEach.call(document.querySelectorAll(t),function(e){i.push(e)}),i},O={},x=function(){return O};!function(e){e.LOADING="LOADING",e.NOT_READY="NOT_READY",e.READY="READY"}(M||(M={}));var D,L="https://web-staging.airtime.com/assets/libs/bigsur-155.min.js",F=M.NOT_READY,H=function(e){return F=e},R="https://deathstar-staging.signal.is",j="6f30a850-890e-11ec-a09e-6d005e592e13",B=function(){return{"Content-Type":"application/json",Accept:"application/json; v3",Authorization:"Bearer "+x().authToken,"X-App-Id":"cronus","X-App-Version":"5.46.0","X-Signal-AnonymousId":j,"X-Signal-IdentifierForVendor":j}},W=function(e){var n=R+"/api/v1/users/"+e,t={method:"GET",mode:"cors",headers:B(),redirect:"follow",referrerPolicy:"no-referrer"};return window.fetch(n,t).then(function(e){return e.json()})},z=function(e){return e.replace("-broadcast","")},G=function(e){return e[0].endsWith("-broadcast")},V={},Y=function(e){return V[e]},q=function(e,n){var t,r,o,i,u,l,_;return r=(t={roomId:z(n[0]),broadcast:G(n),priority:500}).broadcast,i=void 0===(o=t.audioEnabled)||o,u=t.priority,l=R+"/api/v1/rooms/"+t.roomId+"/call/publish",_={method:"POST",mode:"cors",headers:B(),redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({broadcast:r,audioEnabled:i,videoEnabled:!1,priority:u,permissionsSupported:!0})},window.fetch(l,_).then(function(e){return e.json()})},X=function(e,n,t){return function(e){var n=e.streamUrl,t=e.userId,r=R+"/api/v1/rooms/"+e.roomId+"/call/subscribe",o={method:"POST",mode:"cors",headers:B(),redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({stream:n,userId:t})};return window.fetch(r,o).then(function(e){return e.json()})}({roomId:z(n[0]),userId:e,streamUrl:t})},$=function(){return(e={method:"GET",mode:"cors",headers:B(),redirect:"follow",referrerPolicy:"no-referrer"},window.fetch("https://deathstar-staging.signal.is/api/v1/users/me/media/auth/list-streams-token",e).then(function(e){return e.json()})).then(function(e){return{hostPort:"stream-notifier.stage.signal.is:3350",authToken:e.authToken}}).catch(console.log);var e};function Z(n,t,r,o,i){var u,l,_={type:n,props:t,key:r,ref:t&&t.ref,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:++e.__v,__source:o,__self:i};if("function"==typeof n&&(u=n.defaultProps))for(l in u)void 0===t[l]&&(t[l]=u[l]);return e.vnode&&e.vnode(_),_}var J,K,Q,ee=0,ne=[],te=e.__b,re=e.__r,oe=e.diffed,ie=e.__c,ue=e.unmount;function le(n,t){e.__h&&e.__h(K,n,ee||t),ee=0;var r=K.__H||(K.__H={__:[],__h:[]});return n>=r.__.length&&r.__.push({}),r.__[n]}function _e(e){return ee=1,function(e,n,t){var r=le(J++,2);return r.t=e,r.__c||(r.__=[me(void 0,n),function(e){var n=r.t(r.__[0],e);r.__[0]!==n&&(r.__=[n,r.__[1]],r.__c.setState({}))}],r.__c=K),r.__}(me,e)}function ce(n,t){var r=le(J++,3);!e.__s&&ve(r.__H,t)&&(r.__=n,r.__H=t,K.__H.__h.push(r))}function ae(e,n){var t=le(J++,7);return ve(t.__H,n)&&(t.__=e(),t.__H=n,t.__h=e),t.__}function se(e,n){return ee=8,ae(function(){return e},n)}function fe(){ne.forEach(function(n){if(n.__P)try{n.__H.__h.forEach(pe),n.__H.__h.forEach(he),n.__H.__h=[]}catch(t){n.__H.__h=[],e.__e(t,n.__v)}}),ne=[]}e.__b=function(e){K=null,te&&te(e)},e.__r=function(e){re&&re(e),J=0;var n=(K=e.__c).__H;n&&(n.__h.forEach(pe),n.__h.forEach(he),n.__h=[])},e.diffed=function(n){oe&&oe(n);var t=n.__c;t&&t.__H&&t.__H.__h.length&&(1!==ne.push(t)&&Q===e.requestAnimationFrame||((Q=e.requestAnimationFrame)||function(e){var n,t=function(){clearTimeout(r),de&&cancelAnimationFrame(n),setTimeout(e)},r=setTimeout(t,100);de&&(n=requestAnimationFrame(t))})(fe)),K=void 0},e.__c=function(n,t){t.some(function(n){try{n.__h.forEach(pe),n.__h=n.__h.filter(function(e){return!e.__||he(e)})}catch(r){t.some(function(e){e.__h&&(e.__h=[])}),t=[],e.__e(r,n.__v)}}),ie&&ie(n,t)},e.unmount=function(n){ue&&ue(n);var t=n.__c;if(t&&t.__H)try{t.__H.__.forEach(pe)}catch(n){e.__e(n,t.__v)}};var de="function"==typeof requestAnimationFrame;function pe(e){var n=K;"function"==typeof e.__c&&e.__c(),K=n}function he(e){var n=K;e.__c=e.__(),K=n}function ve(e,n){return!e||e.length!==n.length||n.some(function(n,t){return n!==e[t]})}function me(e,n){return"function"==typeof n?n(e):n}function ye(e,n){for(var t in e)if("__source"!==t&&!(t in n))return!0;for(var r in n)if("__source"!==r&&e[r]!==n[r])return!0;return!1}function ge(e){this.props=e}(ge.prototype=new d).isPureReactComponent=!0,ge.prototype.shouldComponentUpdate=function(e,n){return ye(this.props,e)||ye(this.state,n)};var be=e.__b;e.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),be&&be(e)};var ke=e.__e;function we(e){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(e){"function"==typeof e.__c&&e.__c()}),e.__c.__H=null),(e=function(e,n){for(var t in n)e[t]=n[t];return e}({},e)).__c=null,e.__k=e.__k&&e.__k.map(we)),e}function Ee(e){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(Ee)),e}function Se(){this.__u=0,this.t=null,this.__b=null}function Ne(e){var n=e.__.__c;return n&&n.__e&&n.__e(e)}function Pe(){this.u=null,this.o=null}e.__e=function(e,n,t){if(e.then)for(var r,o=n;o=o.__;)if((r=o.__c)&&r.__c)return null==n.__e&&(n.__e=t.__e,n.__k=t.__k),r.__c(e,n);ke(e,n,t)},(Se.prototype=new d).__c=function(e,n){var t=n.__c,r=this;null==r.t&&(r.t=[]),r.t.push(t);var o=Ne(r.__v),i=!1,u=function(){i||(i=!0,t.componentWillUnmount=t.__c,o?o(l):l())};t.__c=t.componentWillUnmount,t.componentWillUnmount=function(){u(),t.__c&&t.__c()};var l=function(){var e;if(!--r.__u)for(r.__v.__k[0]=Ee(r.state.__e),r.setState({__e:r.__b=null});e=r.t.pop();)e.forceUpdate()};!0===n.__h||r.__u++||r.setState({__e:r.__b=r.__v.__k[0]}),e.then(u,u)},Se.prototype.componentWillUnmount=function(){this.t=[]},Se.prototype.render=function(e,n){this.__b&&(this.__v.__k&&(this.__v.__k[0]=we(this.__b)),this.__b=null);var t=n.__e&&a(f,null,e.fallback);return t&&(t.__h=null),[a(f,null,n.__e?null:e.children),t]};var Ae=function(e,n,t){if(++t[1]===t[0]&&e.o.delete(n),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(t=e.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;e.u=t=t[2]}};(Pe.prototype=new d).__e=function(e){var n=this,t=Ne(n.__v),r=n.o.get(e);return r[0]++,function(o){var i=function(){n.props.revealOrder?(r.push(o),Ae(n,e,r)):o()};t?t(i):i()}},Pe.prototype.render=function(e){this.u=null,this.o=new Map;var n=g(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&n.reverse();for(var t=n.length;t--;)this.o.set(n[t],this.u=[1,0,this.u]);return e.children},Pe.prototype.componentDidUpdate=Pe.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(n,t){Ae(e,t,n)})};var Te="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Ie=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ce="undefined"!=typeof Symbol?/fil|che|rad/i:/fil|che|ra/i;d.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(d.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(n){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:n})}})});var Me=e.event;function Ue(){}function Oe(){return this.cancelBubble}function xe(){return this.defaultPrevented}e.event=function(e){return Me&&(e=Me(e)),e.persist=Ue,e.isPropagationStopped=Oe,e.isDefaultPrevented=xe,e.nativeEvent=e};var De={configurable:!0,get:function(){return this.class}},Le=e.vnode;e.vnode=function(e){var n=e.type,t=e.props,r=t;if("string"==typeof n){for(var o in r={},t){var i=t[o];"defaultValue"===o&&"value"in t&&null==t.value?o="value":"download"===o&&!0===i?i="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+n)&&!Ce.test(t.type)?o="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(o)?o=o.toLowerCase():Ie.test(o)?o=o.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===i&&(i=void 0),r[o]=i}"select"==n&&r.multiple&&Array.isArray(r.value)&&(r.value=g(t.children).forEach(function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)})),e.props=r}n&&t.class!=t.className&&(De.enumerable="className"in t,null!=t.className&&(r.class=t.className),Object.defineProperty(r,"className",De)),e.$$typeof=Te,Le&&Le(e)};var Fe=e.__r;e.__r=function(e){Fe&&Fe(e)};var He,Re,je=function(n){var t=n.publisherId,r=n.srcObject,o=(ee=5,ae(function(){return{current:null}},[]));return function(n,t){var i=le(J++,4);!e.__s&&ve(i.__H,t)&&(i.__=function(){o.current&&(o.current.srcObject=r)},i.__H=t,K.__h.push(i))}(0,[r]),Z("audio",{autoPlay:!0,ref:o,id:t})},Be=function(e){var n=e.publisherId,t=e.isLocalStream,r=e.audioStream,o=e.fullName;return Z("div",{className:"StreamTile_15nEkvD",children:[Z("div",{className:"StreamTile_qp1RsGz",style:{backgroundImage:"url("+e.avatarUrl+")"}}),Z("div",{className:"StreamTile_yXlN2pQ",children:o}),!t&&Z(je,{srcObject:r,publisherId:n})]})},We=function(e){return Z("div",{className:"Body_fh9Zt-Z",children:e.participants.map(function(e){return Z(Be,{isLocalStream:e.stream.isLocalStream(),audioStream:e.stream.getAudioStream(),publisherId:e.stream.getPublisherId(),fullName:e.user.firstName+" "+e.user.lastName,avatarUrl:e.user.avatarUrl},e.stream.getPublisherId())})})},ze=function(e){return Z("div",{onClick:e.onClick,className:"LogoutButton_646U-Mb",children:Z("svg",{fill:"none",height:"18",viewBox:"0 0 18 18",width:"18",xmlns:"http://www.w3.org/2000/svg",children:Z("path",{clipRule:"evenodd",d:"m2.25 3.771c0-.8385.6837-1.521 1.52367-1.521h5.94609c.80494 0 1.46644.62681 1.52014 1.41704l.0035.10396v2.2305c0 .414-.3366.75-.7513.75-.3871 0-.70608-.29269-.74689-.66832l-.00441-.08168v-2.2305l-1.3258-.01864-4.66237.01864v3.73051l-.00284.04692v1.43678l.00284.04702.02104 5.21777h5.94609l.02104-2.2178c0-.414.3366-.7499.7513-.7499s.7513.3359.7513.7499v2.1968c0 .8385-.6837 1.521-1.52364 1.521h-1.46187l-.01068-.0013-.01036.0013h-4.46318c-.80497 0-1.46642-.6268-1.52015-1.417l-.00352-.104zm10.9583 3.036c.281-.11625.6041-.05175.8189.16275l1.5027 1.5c.0007 0 .0015.00225.006.006.13.13275.2006.3015.2126.47475.003.048.0015.096-.0045.14475-.018.14325-.0781.282-.1788.3975-.0128.01425-.0256.02775-.0391.04125l-1.4989 1.4963c-.1435.1432-.3358.2197-.5311.2197-.097 0-.1946-.0188-.2878-.057-.2802-.1163-.4636-.39-.4636-.693v-.75h-6.00785c-.41472 0-.75131-.336-.75131-.75s.33659-.75.75131-.75h6.00785v-.75c0-.303.1834-.57675.4636-.693z",className:"LogoutButton_9OKAEyR",fillRule:"evenodd"})})})},Ge=function(e){var n=e.onExit;return Z("div",{className:"Header_RLLfUd9",children:[Z("span",{className:"Header_G7pbYQ-",children:e.title}),n&&Z(ze,{onClick:n})]})},Ve="MuteButton_y9hwAbd",Ye=function(e){return Z("div",{onClick:e.onClick,className:"MuteButton_zBz6M3-",children:Z("svg",e.isMuted?{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:Z("path",{className:Ve,clipRule:"evenodd",d:"m12.0497 13.6641c.1291-.01.255.045.3366.145l1.085 1.3258c.06.0742.0784.1734.0492.2625-.03.09-.1042.1592-.1967.1825-.4333.1092-.8808.17-1.3408.17-2.14836 0-4.11755-1.1841-5.14005-3.0908-.37334-.695-1.31335-.8934-1.94418-.335-.45001.3983-.50084 1.08-.21001 1.6066 1.17835 2.1359 3.20086 3.6143 5.51924 4.1209.3025.0667.525.3209.525.6309v.17c0 .3575-.29.6475-.6475.6475h-.18503c-1.14751 0-2.07835.9275-2.08418 2.0742-.00084.2325.18333.4258.41583.4258h7.50168c.2325 0 .4167-.1933.4159-.4258-.0058-1.1467-.9367-2.0742-2.0842-2.0742h-.1842c-.3575 0-.6483-.29-.6483-.6475v-.17c0-.31.2225-.5642.5258-.6309.5025-.1091.9884-.27 1.4567-.4691.1142-.0484.2458-.0159.3233.08l3.2992 4.0317c.165.2016.4042.3058.6459.3058.1858 0 .3725-.0617.5275-.1883.3558-.2917.4083-.8167.1166-1.1725l-15.00007-18.33358c-.29083-.3575-.81584-.40751-1.17251-.1175-.35583.29167-.40833.81667-.1175 1.17251l3.86253 4.72088c.075.09167.11584.20667.11584.32418v1.09417c0 2.29174 1.87501 4.16674 4.16671 4.16674.0225 0 .045-.0009.0667-.0025zm7.2275.2675c.2908-.5275.2383-1.2109-.2133-1.6092-.6317-.5575-1.5684-.3567-1.9417.3375-.1133.2125-.2433.4125-.3825.6042-.1367.1883-.1292.445.0183.6258l.9642 1.1784c.0975.1191.245.1883.4.1875.155-.0017.3017-.0725.3983-.1934.28-.3516.535-.7283.7567-1.1308zm-10.48841-9.78263c-.15583-.19-.155-.46584.00334-.65334.76584-.91251 1.91337-1.49501 3.19007-1.49501 2.2916 0 4.1667 1.87502 4.1667 4.16671v3.33337c0 .6975-.1801 1.3508-.4901 1.9259-.0816.1508-.2325.2516-.4033.2683-.17.0158-.3375-.0542-.4458-.1867z",fillRule:"evenodd"})}:{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:Z("path",{clipRule:"evenodd",d:"m19.1067 12.3242c-.6328-.5584-1.5759-.3609-1.9504.335-1.0258 1.9066-3.0013 3.0908-5.1566 3.0908-2.15527 0-4.13079-1.1842-5.1566-3.0908-.3737-.6942-1.31339-.895-1.94793-.3375-.45313.3991-.5058 1.0825-.21319 1.61 1.18214 2.135 3.21034 3.6141 5.53702 4.12.3034.0658.5267.3216.5267.6316v.1692c0 .3583-.291.6475-.6505.6475h-.18472c-1.15121 0-2.08505.9283-2.0909 2.0742-.00083.2325.18393.4258.41718.4258h7.52584c.2333 0 .4181-.1933.4172-.4258-.0058-1.1459-.9397-2.0742-2.0909-2.0742h-.1847c-.3595 0-.6505-.2892-.6505-.6475v-.1692c0-.31.2233-.5658.5267-.6316 2.3267-.5059 4.3557-1.9859 5.5379-4.1209.2917-.5266.2399-1.2083-.2116-1.6066zm-7.107 1.3425c-2.29906 0-4.18012-1.875-4.18012-4.1667v-3.33333c0-2.29167 1.88106-4.16667 4.18012-4.16667 2.2991 0 4.1801 1.875 4.1801 4.16667v3.33333c0 2.2917-1.881 4.1667-4.1801 4.1667z",className:Ve,fillRule:"evenodd"})})})},qe=function(){return window.navigator.mediaDevices.getUserMedia({audio:!0}).then(function(e){return e.getAudioTracks()[0]})},Xe=function(e){var n=e.localParticipant,t=_e(!0),r=t[0],o=t[1];return Z("div",{className:"Footer_9KgiwXc",children:Z(Ye,{onClick:function(){n.stream.setAudioMuted(!r,qe),o(function(e){return!e})},isMuted:r})})},$e=function(){return Z("div",{className:"Spinner_cjzeaVk"})},Ze=function e(){var n=document.getElementsByTagName("audio");n&&(Array.from(n).forEach(function(e){return e.play()}),document.removeEventListener("click",e))},Je=function(e){var n=e.theme,t=void 0===n?{}:n,r=t.colors;return Z("div",{id:"voice-panel",style:"\n    --primary-color: "+((null==r?void 0:r.primaryColor)||"#7B61FF")+";\n    --secondary-color: "+((null==r?void 0:r.secondaryColor)||"#FF342D")+";\n    --tertiary-color: "+((null==r?void 0:r.tertiaryColor)||"#262626")+";\n    --primary-background-color: "+((null==r?void 0:r.primaryBackgroundColor)||"#F5F5F5")+";\n    --secondary-background-color: "+((null==r?void 0:r.secondaryBackgroundColor)||"#FFFFFF")+";\n\n    --font-family: "+(t.fontFamily||"SF Pro Rounded")+";\n  ",className:e.className,children:e.children})},Ke="VoicePanel_Ohm2WTk",Qe=function(){var e;O={},null==(e=document.querySelector('script[src="'+L+'"]'))||e.remove(),H(M.NOT_READY)},en=(He=function(e){var n=e.groupId,t=e.theme,r=_e(!0),o=r[0],i=r[1],u=_e(null),l=u[0],_=u[1],c=_e([]),a=c[0],s=c[1],f=_e(null),d=f[0],p=f[1];ce(function(){document.addEventListener("click",Ze)},[]);var h=se(function(e){(function(e){!function(e){var n=Y(e);n&&(n.dispose(),function(e){delete V[e]}(e))}(e)})(e),s([]),p(null)},[]),v=se(function(){try{var e=function(e){s(function(n){return[].concat(n,[{stream:e.stream,user:e.user}])})},t=function(e){s(function(n){return n.filter(function(n){return n.stream.getPublisherId()!==e.getPublisherId()})})},r=function(r,o){try{var u=(i(!0),Promise.resolve(function(e){var n=e.groupId,t=e.eventListeners;try{var r,o=function(e){if(r)return e;throw new Error("[voice-ui] must be loaded before joining a group")},i=function(){if(F===M.READY)return function(e){var n=e.userId,t=e.groupId,r=e.eventListeners,o=[t],i=new D.TagManagerHandlers(q,X,$),u=new D.TagManagerFactory(n,"cronus",i).createTagManager(o,!1,!0);(function(e,n){var t;e.on(D.TagManager.EVENTS.NEW_STREAM,(t=n.onStreamActive,function(e){e.on(D.MediaStream.Events.STATE_CHANGE,function(e){var n=e.onStreamActive;return function(e){try{var t=e.eventName===D.MediaStream.StateTransition.FRAMES_READY;return Promise.resolve(function(){if(t)return Promise.resolve(W(e.stream.getPublisherId())).then(function(t){return n({stream:e.stream,user:{firstName:t.firstName,lastName:t.lastName,avatarUrl:t.avatarUrl}})})}())}catch(e){return Promise.reject(e)}}}({onStreamActive:t}))})),e.on(D.TagManager.EVENTS.END_STREAM,n.onEndStream)})(u,r),function(e,n){if(!e||!n)throw new Error("Cannot set TagManager instance or groupID not found");V[e]=n}(t,u)}({userId:x().userId,groupId:n,eventListeners:t}),Promise.resolve(function(e){var n=R+"/api/v1/rooms/"+e,t={method:"GET",mode:"cors",headers:B(),redirect:"follow",referrerPolicy:"no-referrer"};return window.fetch(n,t).then(function(e){return e.json()})}(n)).then(function(e){var t=function(e){var n=Y(e);return window.navigator.mediaDevices.getUserMedia({audio:!0}).then(function(e){return D.Media.createStreamFromTracks(e.getAudioTracks(),!1)}).then(function(e){return n.publishStream(e).then(function(){return e})})}(n).then(function(t){try{return t.setAudioMuted(!0),Promise.resolve(W(t.getPublisherId())).then(function(r){return{localParticipant:{user:{firstName:r.firstName,lastName:r.lastName,avatarUrl:r.avatarUrl},stream:t},group:{id:n,title:e.room.title}}})}catch(e){return Promise.reject(e)}});return r=1,t})}();return Promise.resolve(i&&i.then?i.then(o):o(i))}catch(e){return Promise.reject(e)}}({groupId:n,eventListeners:{onStreamActive:e,onEndStream:t}})).then(function(e){var n=e.localParticipant;_(e.group),p(n),s(function(e){return[].concat(e,[n])})}))}catch(e){return o(!0,e)}return u&&u.then?u.then(o.bind(null,!1),o.bind(null,!0)):o(!1,u)}(0,function(e,n){if(i(!1),e)throw n;return n});return Promise.resolve(r&&r.then?r.then(function(){}):void 0)}catch(e){return Promise.reject(e)}},[n]);return ce(function(){v()},[v]),ce(function(){if(n)return function(){h(n)}},[n,h]),Z(Je,o?{theme:t,className:Ke,children:Z($e,{})}:{theme:t,className:Ke,children:[Z(Ge,{title:l.title,onExit:d?function(){h(n)}:null}),Z(We,{participants:a}),Z(Xe,{localParticipant:d})]})},Re=He,{render:function(n){void 0===n&&(n={});var t=n.selector;void 0===t&&(t=null);var r=n.inline;void 0===r&&(r=!1);var l=n.clean;void 0===l&&(l=!1);var _=n.clientSpecified;void 0===_&&(_=!1);var c=n.defaultProps;void 0===c&&(c={});var s=U({selector:t,inline:r,clientSpecified:_}),d=function(){if(s.length>0){var n=U({selector:t,inline:r,clientSpecified:_});return function(n,t,r,l,_){t.forEach(function(t){var r=t;if(!r._habitat){r._habitat=!0;var c=function(e,n){void 0===n&&(n={});var t=e.attributes,r=Object.assign({},n);return Object.keys(t).forEach(function(e){if(t.hasOwnProperty(e)){var n=t[e].name;if(!n||"string"!=typeof n)return!1;var o=n.split(/(data-props?-)/).pop()||"";n!==(o=o.replace(/-([a-z])/gi,function(e,n){return n.toUpperCase()}))&&(r[o]=t[e].nodeValue)}}),[].forEach.call(e.getElementsByTagName("script"),function(e){var n={};if(e.hasAttribute("type")){if("text/props"!==e.getAttribute("type")&&"application/json"!==e.getAttribute("type"))return;try{n=JSON.parse(e.innerHTML)}catch(e){throw new Error(e)}Object.assign(r,n)}}),r}(t,_)||_;return l&&(r.innerHTML=""),function(n,t,r){var l,_,c;e.__&&e.__(n,t),_=(l=null===o)?null:t.__k,n=a(f,null,[n]),c=[],P(t,t.__k=n,_||i,i,void 0!==t.ownerSVGElement,_?null:t.childNodes.length?u.slice.call(t.childNodes):null,c,i,l),A(c,n)}(a(n,c),r)}})}(Re,n,0,l,c)}};d(),document.addEventListener("DOMContentLoaded",d),document.addEventListener("load",d)}});return function(e){var n=e.groupId,t=e.selector,r=e.theme;return function(e){return function(e){O=e}(e),H(M.LOADING),new Promise(function(e,n){if("undefined"!=typeof window){var t=document.createElement("script");return t.src=L,t.async=!0,t.onload=function(){var n;n=window.bigsur,D=n,H(M.READY),e("Congrats! voice-core is ready")},document.getElementsByTagName("head")[0].appendChild(t)}return n("Failed to load voice-core - Window not defined")})}({authToken:e.authToken,userId:e.userId}).then(function(){return en.render({selector:t,clean:!0,defaultProps:{groupId:n,theme:r}}),{unmount:Qe}})}});
//# sourceMappingURL=index.umd.js.map
